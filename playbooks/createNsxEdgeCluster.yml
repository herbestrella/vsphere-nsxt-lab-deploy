---
- hosts: 127.0.0.1
  connection: local
  vars_files:
    - ../answerfile.yml
  tasks:
    - name: Create Edge Cluster
      nsxt_fabric_compute_managers:
          hostname: "{{ nsxman.nsxman01.hostname }}"
          username: "{{ nsxmanadminuser }}"
          password: "{{ nsxmanpassword }}"
          validate_certs: False
          display_name: "{{ edge_cluster_name }}"
          cluster_profile_bindings:
          - profile_name: "{{ edge_cluster_profile }}"
          resource_type: EdgeHighAvailabilityProfile
          members:
          - transport_node_name: "{{ transport_node1 }}"
          - transport_node_name: "{{ transport_node2 }}"
          state: present
